<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Library.Views.AddEditBookPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:Library.Models"
             Title="–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <ScrollView>
        <StackLayout Padding="20" Spacing="20">
            
            <!-- –§–æ—Ä–º–∞ –∫–Ω–∏–≥–∏ -->
            <Border BackgroundColor="{DynamicResource CardBackgroundColor}" 
                   Padding="20" 
                   StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="15"/>
                </Border.StrokeShape>
                <StackLayout Spacing="15">
                    
                    <Label Text="üìö –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–µ" 
                           FontSize="20" 
                           FontAttributes="Bold" 
                           TextColor="{DynamicResource PrimaryTextColor}" />
                    
                    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                    <StackLayout>
                        <Label Text="–ù–∞–∑–≤–∞–Ω–∏–µ *" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Entry x:Name="TitleEntry" 
                               Placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               PlaceholderColor="{DynamicResource SecondaryTextColor}" />
                    </StackLayout>
                    
                    <!-- –ê–≤—Ç–æ—Ä—ã -->
                    <StackLayout>
                        <Label Text="–ê–≤—Ç–æ—Ä—ã *" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        
                        <!-- –í—ã–±–æ—Ä –∞–≤—Ç–æ—Ä–∞ -->
                        <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="5">
                            <Picker x:Name="AuthorPicker" 
                                    Grid.Column="0"
                                    Title="–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞"
                                    TextColor="{DynamicResource PrimaryTextColor}"
                                    TitleColor="{DynamicResource SecondaryTextColor}" />
                            <Button Text="+" 
                                    Grid.Column="1"
                                    BackgroundColor="{DynamicResource PrimaryColor}" 
                                    TextColor="White" 
                                    WidthRequest="50"
                                    Clicked="OnAddAuthorClicked" />
                            <Button Text="–ù–æ–≤—ã–π" 
                                    Grid.Column="2"
                                    BackgroundColor="{DynamicResource SecondaryColor}" 
                                    TextColor="{DynamicResource PrimaryTextColor}" 
                                    WidthRequest="80"
                                    Clicked="OnNewAuthorClicked" />
                        </Grid>
                        
                        <!-- –°–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤ -->
                        <CollectionView x:Name="SelectedAuthorsCollectionView" 
                                        Margin="0,10,0,0">
                            <CollectionView.ItemTemplate>
                                <DataTemplate x:DataType="models:Author">
                                    <Grid Padding="5" ColumnDefinitions="*,Auto">
                                        <Label Text="{Binding Name}" 
                                               Grid.Column="0"
                                               VerticalOptions="Center"
                                               TextColor="{DynamicResource PrimaryTextColor}" />
                                        <Button Text="‚úï" 
                                                Grid.Column="1"
                                                BackgroundColor="{DynamicResource ErrorColor}" 
                                                TextColor="White" 
                                                WidthRequest="40"
                                                HeightRequest="40"
                                                CornerRadius="20"
                                                CommandParameter="{Binding .}"
                                                Clicked="OnRemoveAuthorClicked" />
                                    </Grid>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                    
                    <!-- –¶–∏–∫–ª -->
                    <StackLayout>
                        <Label Text="–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–∞" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Entry x:Name="SeriesTitleEntry" 
                               Placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               PlaceholderColor="{DynamicResource SecondaryTextColor}" />
                    </StackLayout>
                    
                    <!-- –ù–æ–º–µ—Ä –≤ —Ü–∏–∫–ª–µ -->
                    <StackLayout>
                        <Label Text="–ù–æ–º–µ—Ä –≤ —Ü–∏–∫–ª–µ" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Entry x:Name="SeriesNumberEntry" 
                               Placeholder="–ù–æ–º–µ—Ä –∫–Ω–∏–≥–∏ –≤ —Ü–∏–∫–ª–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" 
                               Keyboard="Numeric"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               PlaceholderColor="{DynamicResource SecondaryTextColor}" />
                    </StackLayout>
                    
                    <!-- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü -->
                    <StackLayout>
                        <Label Text="–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü *" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Entry x:Name="TotalPagesEntry" 
                               Placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü" 
                               Keyboard="Numeric"
                               TextColor="{DynamicResource PrimaryTextColor}"
                               PlaceholderColor="{DynamicResource SecondaryTextColor}" />
                    </StackLayout>
                    
                    <!-- –°—Ç–∞—Ç—É—Å -->
                    <StackLayout>
                        <Label Text="–°—Ç–∞—Ç—É—Å" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Picker x:Name="StatusPicker"
                                TextColor="{DynamicResource PrimaryTextColor}"
                                TitleColor="{DynamicResource SecondaryTextColor}">
                            <Picker.Items>
                                <x:String>–í –ø–ª–∞–Ω–∞—Ö</x:String>
                                <x:String>–ß–∏—Ç–∞—é —Å–µ–π—á–∞—Å</x:String>
                                <x:String>–ü—Ä–æ—á–∏—Ç–∞–Ω–æ</x:String>
                            </Picker.Items>
                        </Picker>
                    </StackLayout>
                    
                </StackLayout>
            </Border>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <StackLayout Orientation="Horizontal" Spacing="10">
                <Button Text="üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å" 
                        BackgroundColor="{DynamicResource PrimaryColor}" 
                        TextColor="White" 
                        CornerRadius="10" 
                        HorizontalOptions="FillAndExpand" 
                        Clicked="OnSaveClicked" />
                <Button Text="‚ùå –û—Ç–º–µ–Ω–∞" 
                        BackgroundColor="{DynamicResource SecondaryColor}" 
                        TextColor="{DynamicResource PrimaryTextColor}" 
                        CornerRadius="10" 
                        HorizontalOptions="FillAndExpand" 
                        Clicked="OnCancelClicked" />
            </StackLayout>
            
        </StackLayout>
    </ScrollView>

</ContentPage>